<!DOCTYPE html>
<html>

<head>
	<script src="DateManager.js"></script>
	<script src="Loan.js"></script>
	<script src="LoanManager.js"></script>
	<script src="VisualizerTools.js"></script>
	
	<script src="bower_components/jquery/dist/jquery.js"></script>
	
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>

	
</head>

<body>
	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

	<script>
		var myLoans = [
			new Loan("Stafford 1-01", 2591.09, 6.55, 30.35, 13),
			new Loan("Stafford 1-02", 3437.51, 5.35, 38.27, 13),
			new Loan("Direct Loan - Sub 1-03", 1473.15, 5.35, 16.42, 13),
			new Loan("Direct Loan - Sub 1-04", 4391.32, 3.15, 44.41, 13),
			new Loan("Direct Loan - Unsub 1-05", 845.55, 6.55, 9.92, 13),
			new Loan("Direct Loan - Unsub 1-06", 6741.87, 6.55, 79.16, 13),
			new Loan("Direct Loan - Unsub 1-07", 2314.16, 6.55, 27.17, 13),
			new Loan("Direct Loan - Sub 1-08", 5458.15, 3.15, 55.19, 13),
			new Loan("Direct Loan - Unsub - 1-09", 2180.64, 6.55, 25.60, 13),
			new Loan("Direct Loan - Sub 1-10", 2081.59, 3.61, 21.49, 13),
			new Loan("Direct Loan - Unsub 1-11", 763.09, 3.61, 7.87, 13),
			new Loan("Parent PLUS Loan 1-01", 6579.50, 8.25, 83.41, 8), 
			new Loan("Direct Parent PLUS 1-02", 18829.16, 7.65, 241.27, 8),
			new Loan("Direct Parent PLUS 1-03", 37441.54, 7.65, 476.79, 8),
			new Loan("Direct Parent PLUS 1-04", 35726.53, 7.65, 441.48, 8),
			new Loan("Direct Parent PLUS 1-05", 33796.55, 7.65, 417.63, 8),
			new Loan("Direct Parent PLUS 1-06", 10118.85, 6.16, 117.48, 8)
		];

		var visualizerTools = new VisualizerTools();
		var dataPoints = visualizerTools.loanPayoffSimulation(
			new Date(), 
			200/*extra amnt*/,
			27/*extra pay day*/,
			myLoans
		);

		/* Highcharts */
		$(function () {
		    $('#container').highcharts({
		        chart: {
		            zoomType: 'x'
		        },
		        title: {
		            text: 'Your Loan Countdown'
		        },
		        subtitle: {
		            text: document.ontouchstart === undefined ?
		                    'Click and drag in the plot area to zoom in' :
		                    'Pinch the chart to zoom in'
		        },
		        xAxis: {
		            type: 'datetime',
		            minRange: 14 * 24 * 3600000 // fourteen days
		        },
		        yAxis: {
		            title: {
		                text: 'Loan Amount'
		            }
		        },
		        legend: {
		            enabled: false
		        },
		        plotOptions: {
		            area: {
		                fillColor: {
		                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
		                    stops: [
		                        [0, Highcharts.getOptions().colors[0]],
		                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
		                    ]
		                },
		                marker: {
		                    radius: 2
		                },
		                lineWidth: 1,
		                states: {
		                    hover: {
		                        lineWidth: 1
		                    }
		                },
		                threshold: null
		            }
		        },

		        series: [{
		            type: 'area',
		            name: 'Loan Amount',
		            pointInterval: 24 * 3600 * 1000,
		            pointStart: Date.UTC(2014, 12, 7),
		            data: dataPoints
		        }]
		    });
		});
	</script>

	<h3>RULES</h3>
	<ul>
		<li>Pay highest interest loans first (amount on loan doesn't matter)</li>
		<li>When loan is paid of, add its minimum payment to your extra payment</li>
		<li>If loan is overpaid, apply leftover amount to next highest interest loan</li>
		<li>Interest accrues daily and is added to principle</li>
	</ul>
</body>

</html>